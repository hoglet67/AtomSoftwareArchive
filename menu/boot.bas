 10 DIM LL(10)
 20 FOR I=0 TO 10
 30 LL(I)=-1
 40 NEXT
 50 FOR I=0 TO 1
 60 P=#800
 70[
 80:LL0
 90\WORK OUT CODE LOCATION
100 SEI
110 JSR #FF37
120 TSX
130 DEX
140 CLC
150 LDA #100,X
160 ADC @(ABS(LL9 - LL0 - 3) % 256)
170 STA #80
180 LDA #101,X
190 ADC @(ABS(LL9 - LL0 - 3) / 256)
200 STA #81
210 CLI
220\#80,81 CONTAINS CMD BLOCK ADDR
230 LDY @#0
240:LL1
250\READ NEXT CMD
260 LDA (#80),Y
270\CMD 00: UPDATE TOP THEN RUN
280 BEQ LL5
290\CMD 01: RUN
300 CMP @#01
310 BEQ LL8
320 CMP @#02
330\CMD 02: RETURN 
340 BEQ LL4
350 CMP @#03
360\CMD 03: SET ?18=XX
370 BEQ LL3
380\CMD DEFAULT: PASS TO OSCLI
390 LDx @#0
400:LL2
410 LDA (#80),Y
420 STA #100,X
430 INY
440 INX
450 CMP @#D
460 BNE LL2
464\WORD AROUND FOR SYN? ERROR
465 STA #100,X
470\CALL OSCLI, PRESERVING Y
480 TYA
490 PHA
500 JSR #FFF7
510 PLA
520 TAY
530 BNE LL1
540:LL3
550\CMD 03: ?18=XX
560 INY
570 LDA (#80),Y
580 STA #12
590 INY
600 BNE LL1
610:LL4
620\CMD 02: RETURN
630 RTS
640:LL5
650\CMD 00: UPDATE TOP THEN RUN
660 LDA #12
670 STA #E
680 LDY @#0
690 STY #D
700 DEY
710:LL6
720 INY
730 LDA (#D),Y
740 CMP @#D
750 BNE LL6
760 JSR #CDBC
770 LDA (#D),Y
780 BMI LL7
790 INY
800 BNE LL6
810:LL7
820 INY
830 JSR #CDBC
840:LL8
850\CMP 01: RUN
851 LDA @#52
852 STA #100
853 LDA @#55
854 STA #101
855 LDA @#4E
856 STA #102
857 LDA @#0D
858 STA #103
860 JMP #C2D5
870:LL9
880]
890 ?P=3
900 P?1=40
910 P=P+2
920 $P="CWD ../AS/ADVENT"
930 P=P+LEN(P)+1
940 $P="LOAD ADVENTUR"
950 P=P+LEN(P)+1
951 $P="LOAD HOUSE"
952 P=P+LEN(P)+1
953 ?P=0
960 NEXT
970 END

